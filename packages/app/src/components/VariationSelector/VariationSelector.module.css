.gallery {
  --item-text-color: var(--neutral-700);
  --item-text-color-hover: black;
  --item-title-bg-color: #fffb;
  --item-border-color: var(--neutral-200);
  --item-border-color-hover: var(--neutral-400);

  [data-theme='dark'] & {
    --item-text-color: var(--neutral-400);
    --item-text-color-hover: white;
    --item-title-bg-color: rgb(from var(--neutral-900) r g b / 80%);
    --item-border-color: var(--neutral-800);
    --item-border-color-hover: var(--neutral-600);
  }
}

.variation-preview {
  display: grid;
  grid-template-columns: 1fr 2fr;
  grid-template-rows: 50% auto;
  grid-template-areas:
    'variations flame'
    'variation-options flame';
  gap: 0.3rem;
  height: 90vh;
  min-width: 90vw;

  @media (max-height: 1000px) and (min-height: 400px) {
    grid-template-rows: 40% auto;
    height: 70vh;
    min-width: 75vw;
  }
}

.modal-no-scroll {
  overflow: hidden;
  @media (max-height: 1000px) and (min-height: 400px) {
    overflow: auto;
  }
}

.variation-selector-sidebar {
  display: flex;
  flex-direction: column;
  overflow-y: auto;

  grid-area: variations;
}

.variation-selector-preview {
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  grid-area: flame;
}

.variation-selector-sidebar-options {
  grid-area: variation-options;
  gap: var(--space-4);
  margin-top: var(--space-1);
}

.affine-editor {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  margin-top: var(--space-3);
  max-height: 40%;
}

.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(12rem, auto));
  gap: 0.2rem;
  justify-items: stretch;
  max-height: 50%;
  padding-bottom: var(--space-3);
}

.sentinel {
  min-height: 2rem;
}

.undo-message {
  font-style: italic;
  font-size: small;
  color: var(--neutral-500);
  margin-left: var(--space-3);
}

.item {
  display: block;
  width: 100%;
  padding: 0;
  margin: 0;
  position: relative;
  overflow: hidden;
  aspect-ratio: 16 / 9;
  border: 1px solid var(--item-border-color);
  border-radius: 0.5rem;
  cursor: pointer;
  background: none;
  color: var(--item-text-color);

  &:hover {
    color: var(--item-text-color-hover);
    border: 1px solid var(--item-border-color-hover);
  }
  &.selected {
    background: #1a1a1a;
    border-radius: 0.5rem;
    border: 2px solid transparent;
    [data-theme='dark'] & {
      background: linear-gradient(
          45deg,
          transparent 0%,
          #c98e21 20%,
          #c98e21 80%,
          transparent 100%
        )
        border-box;
    }

    background: linear-gradient(45deg, #00bfff 20%, #00bfff 80%) border-box;
  }
}

.preview-title {
  display: flex;
  align-items: center;
}

.item-title {
  position: absolute;
  width: 100%;
  bottom: 0;
  padding-inline: 0.5rem;
  padding-block: 0.25rem;
  background-color: var(--item-title-bg-color);
  font-size: small;
}

.item-params {
  display: grid;
  grid-template-columns: auto 1fr auto;

  max-height: 30%;
  gap: var(--space-3);
  font-size: small;

  align-items: center;
  justify-items: stretch;

  & > :first-child {
    justify-self: start;
  }
  & > label > span {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100px;
  }
}

.canvas {
  image-rendering: pixelated;
  /* allow pointer events to act correctly on touch devices */
  touch-action: none;
}

.flame-preview {
  display: grid;
  height: 100%;
  grid-template-rows: 1fr auto;
  grid-template-areas:
    'preview'
    'preview-controls';
  overflow: hidden;

  @media (max-height: 1000px) and (min-height: 400px) {
    max-height: 75vh;
  }

  /* Start a stacking context so canvas doesn't go behind body */
  isolation: isolate;
}

.flame-preview-flame {
  z-index: -1;
  grid-area: preview;
  grid-row-end: preview-controls;
}

.flame-preview-controls {
  grid-area: preview-controls;
  display: flex;
  padding: var(--space-2);
  gap: var(--space-2);

  isolation: isolate;
}
